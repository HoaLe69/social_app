import SockJS from "sockjs-client";
import * as Stomp from "stompjs";

class SocketClient {
  constructor() {
    this.socket = new SockJS("http://localhost:8080/ws");
    this.stompClient = Stomp.over(this.socket);
  }
  connect = () => {
    this.stompClient.connect({}, function (frame) {
      this.stompClient.subscribe("/topic/messages", function (messageOutput) {
        this.showMessage(JSON.parse(messageOutput.body));
      });
    });
  };
  sendMessage = (infomation) => {
    this.stompClient.send(
      "/app/messages",
      {},
      JSON.stringify({ ...infomation }),
    );
  };
  showMessage = (data) => {};
}

export default SocketClient;
